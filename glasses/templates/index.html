<html>
    <head>
        <meta charset="UTF-8">
        <script src="../static/webcam.js"></script>
        <link rel="stylesheet" href="../static/main.css">
    </head>
    <body>
        <div class="container">
            <div id="camera"></div>
            <div class="buttons">
                <button id="snap" onclick="takeSnapshot()">Take Snapshot</button>
                <button id="unfreeze" onclick="unfreeze()">Unfreeze</button>
                <form action="{{ url_for('predict') }}" method="post" enctype="multipart/form-data">
                    <input id="image" type="hidden" name="image" value="" required>
                    <input id="submit" type="submit" value="Predict"/>
                </form>
            </div>
        </div>
        

        <script language="Javascript">
            Webcam.set({
                width: 640,
                height: 480,
                image_format: 'jpeg'
            });

            Webcam.attach("#camera");

            function unfreeze() {
                Webcam.unfreeze();
            }

            function takeSnapshot(){
                Webcam.snap(function(data_uri){
                    var raw_image_data = data_uri.replace(/^data\:image\/\w+\;base64\,/, '');
                    document.getElementById('image').value = raw_image_data;
                });
                Webcam.freeze();
            }
        </script>
    </body>
</html>